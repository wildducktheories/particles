# NAME 

particles - a library and utility for simulating a simple particle universe

# DESCRIPTION

**particles** implements a simulation of a toy-universe. 

This universe contains particles which have 2 quarks. Quarks exist in either an
up state (up-quarks) or a down state (down-quarks). A particle must have at
least one up-quark and must have either a second up-quark or a down-quark.

Only one quark of a particle is directly observable and the only observable
quarks are up-quarks. An observation can be "read" to determine the state of the
unobservable quark. Once this happens the associated particle disappears and is
replaced by a particle with the same quark-state somewhere else close by - the
replacement particle has no discernible relationship to the replaced particle.

Particles can be pooled. Pools can be sampled by random sampling processes.
Sampling processes choose a particle or quark at random and then record details
of the particle and one related up-quark (sample-particle)  or the quark and its
related particle (sample-quark) in an observation.

The observation also records the probability that the observation is of a
particle with 2 up-quarks. The sample-particle process generates observations
that have a 1/3 chance of identifying a particle with 2 up-quarks. The sample-
quark process generates observations that have a 1/2 chance of identifying a
particle with 2 up-quarks.

Different observations of the same particle generated by the same or different 
processes can be matched. Matching can occur in one of two ways - matching
by particle or matching by quark. Doing so creates a new observation which may
have a different probability to one or both of the original observations.

# SIMULATOR

The simulator command (called particles) generates a simulated pool of particles
and then observes that pool with two different sampling processes. The 
observations generated by these processes are matched with a matching process.
The resulting stream of matched observations is read to count the number
of particles and the number with 2 up-quarks. This number is reported on stderr.

The options that can be passed to the command are:

    Usage of particles:
      -match-type string
            Type of match: particle or quark (default "particle")
      -max-matches int
            Maximum number of matches (default 1000)
      -pool-size int
            Size of the particle pool. (default 10000)
      -process-A string
            Sampling process A: particle or quark (default "quark")
      -process-B string
            Sampling process B: particle or quark (default "particle")
      -verbose
            Be verbose about statistics

The observed probabilities for each combination of parameters are:

    process-A   process-B   match-type  probability
    -----------------------------------------------
    particle    particle    quark       20%
    particle    particle    particle    33%
    quark       particle    quark       33%
    quark       particle    particle    50%
    quark       quark       quark       50%
    quark       quark       particle    67%

# NOTES

This simulation was inspired in part by a [variant](https://blog.jonseymour.net/the-boy-girl-paradox-with-a-twist) of the Boy-Girl paradox. The analogy between 
those problems and this system is:

* mother/family <=> particle
* girl <=> up-quark
* boy  <=> down-quark

